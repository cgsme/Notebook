# JVM 内存模型

内存模型可以理解为：在特定的操作协议下，对特定的内存或高速缓存进行读写访问的过程的抽象。JVM中定义了一种JAVA内存模型（JMM）**来屏蔽掉各种硬件和操作系统的内存访问差异**。以实现在任何平台下都能达到一致的内存访问效果。

- 主内存：本地方法区、堆
- 工作内存（本地内存）：程序私有的栈（虚拟机栈）、对主存部分变量拷贝的寄存器（包括程序计数器PC和CPU工作的告诉缓存区）

## 主要内存区域

运行时数据区：

- 堆（垃圾回收的主要区域，所以也称为GC堆）

    堆包括JAVA堆和方法区，是垃圾回收的主要对象，尤其是JAVA堆。方法区也被称为永久代。

- 栈
- 程序计数器（保证程序在多线程环境下能够连续执行）
- 虚拟机栈
- 本地方法栈

## 引用计数算法：计算对象的引用数量

早期的用于确定垃圾的策略。通过判断对象的引用数量来决定对象是否可以被回收。

无法解决对象互相引用的问题，当对象互相引用时，那么这两个对象永远不能被回收。

## 可达性分析算法：判断对象的引用链是否可达

通过判断对象的引用链是否可达来决定对象是否可以被回收。

**可以作为GC ROOT的对象包括以下几种：**

- 虚拟机栈（栈帧中的局部变量表）中引用的对象；
- 方法区中静态属性引用的对象；
- 方法区中常量引用的对象；
- 本地方法栈中Native方法引用的对象；
